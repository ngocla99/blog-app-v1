<app-preloader></app-preloader>
<section class="main-content" style="margin-bottom: 100px">
  <div class="container-xl">
    <!-- section header -->
    <div class="section-header row form-setting" style="padding-bottom: 10px">
      <div class="col-6">
        <h2 class="section-title">Update User</h2>
        <img
          src="https://themeger.shop/html/katen/html/images/wave.svg"
          class="wave"
          alt="wave"
        />
      </div>
      <div class="col-6">
        <button class="btn btn-md btn-danger float-end" (click)="logout()">
          Logout
        </button>
      </div>
    </div>

    <div *ngIf="isLoading" class="row form-setting">
      <div class="text-center">
        <app-loading-spinner></app-loading-spinner>
      </div>
    </div>

    <div *ngIf="!isLoading" class="row form-setting">
      <!-- Contact Form -->
      <form
        id="contact-form"
        class="contact-form"
        #settingForm="ngForm"
        (submit)="onSubmit(settingForm.value)"
      >
        <div class="messages"></div>

        <div class="row">
          <div class="column col-md-12">
            <div class="form-group">
              <label>Username</label>
              <input
                type="text"
                class="form-control"
                placeholder="Your Name"
                #username="ngModel"
                name="username"
                [ngModel]="user?.username"
                (ngModelChange)="user.username = $event"
                required
              />
              <div
                class="col alert"
                role="alert"
                *ngIf="username?.errors?.['required'] && username?.touched"
              >
                <i style="color: red">Username is required!!!</i>
              </div>
            </div>
          </div>

          <div class="column col-md-12">
            <div class="form-group">
              <label>Email</label>
              <input
                type="text"
                class="form-control"
                placeholder="Email"
                pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
                #email="ngModel"
                name="email"
                [ngModel]="user?.email"
                (ngModelChange)="user.email = $event"
                required
              />
              <div
                class="col alert"
                role="alert"
                *ngIf="email?.errors?.['required'] && email?.touched"
              >
                <i style="color: red">Email is required!!!</i>
              </div>
              <div
                class="col alert"
                role="alert"
                *ngIf="email?.errors?.['pattern'] && email?.touched"
              >
                <i style="color: red">Email is invalid!!!</i>
              </div>
            </div>
          </div>

          <div class="column col-md-12">
            <div class="form-group">
              <label>Short bio about you</label>
              <textarea
                class="form-control"
                rows="8"
                placeholder="Short bio about you"
                #bio="ngModel"
                name="bio"
                [ngModel]="user?.bio"
                (ngModelChange)="user.bio = $event"
                required
              ></textarea>
              <div
                class="col alert"
                role="alert"
                *ngIf="bio?.errors?.['required'] && bio?.touched"
              >
                <i style="color: red">Bio is required!!!</i>
              </div>
            </div>
          </div>
          <div class="column col-md-12">
            <div class="form-group">
              <label>URL of profile picture</label>
              <input
                type="text"
                class="form-control"
                placeholder="URL of profile picture"
                #image="ngModel"
                name="image"
                [ngModel]="user?.image"
                (ngModelChange)="user.image = $event"
                required
              />
              <div
                class="col alert"
                role="alert"
                *ngIf="image?.errors?.['required'] && image?.touched"
              >
                <i style="color: red">Image is required!!!</i>
              </div>
            </div>
          </div>
        </div>

        <button
          type="submit"
          [disabled]="settingForm.invalid"
          class="btn btn-default pull-xs-right"
        >
          Update User
        </button>
      </form>
    </div>

    <div *ngIf="!isLoading" class="row form-setting">
      <div class="col-12">
        <h5 class="text-xs-left" style="margin-top: 20px">Number per page:</h5>

        <div class="form-group input-group">
          <select class="form-control" [(ngModel)]="resultsPerPage">
            <option [value]="0" selected>Select number Per Page</option>
            <option [value]="1">1 Page per Page</option>
            <option [value]="2">2 Pages per Page</option>
            <option [value]="3">3 Pages per Page</option>
          </select>
          <button
            class="btn btn-default pull-xs-right"
            (click)="onPageChoose()"
          >
            Save
          </button>
        </div>
      </div>
    </div>
  </div>
</section>
<app-alert
  [message]="updateUser"
  *ngIf="updateUser"
  (yes)="onHandleUpdate()"
  (close)="onHandleClose()"
></app-alert>
<app-alert
  [message]="logoutUser"
  *ngIf="logoutUser"
  (yes)="onHandleLogout()"
  (close)="onHandleClose()"
></app-alert>
